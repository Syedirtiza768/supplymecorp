/* =============================================
   FLIPBOOK CORE STYLES - Clean Natural Layout
   
   LAYOUT PHILOSOPHY:
   1. Work WITH react-pageflip library's positioning, don't fight it
   2. Library uses absolute positioning for pages - let it
   3. Our job: provide proper centering containers at each level
   4. Title page (page 1): Single centered page via showCover=true
   5. Spreads (page 2+): Two pages side-by-side via library's layout
   
   HIERARCHY:
   .flipbook-canvas-container → viewport background & padding
     .flipbook-content → main display area
       .flipbook-zoom-wrapper → zoom transform
         .stf__parent (library) → flipbook root
           .stf__wrapper (library) → responsive container
             .stf__block (library) → spread container with absolute positioned pages
               .stf__item (library) → individual pages
   ============================================= */

/* ===== VIEWPORT CONTAINER ===== */
.flipbook-enhanced {
  height: auto !important;
  min-height: 85vh;
}

.flipbook-canvas-container {
  width: 100%;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 1rem;
  position: relative;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  background-image: 
    linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%),
    url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
  background-size: cover, 400px 400px;
  background-position: center, center;
}

/* ===== CONTENT DISPLAY AREA ===== */
/* Main display area for flipbook - centers content naturally */
.flipbook-content {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 100% !important;
  position: relative !important;
}

/* ===== ZOOM WRAPPER ===== */
/* Handles zoom transform - wraps library root */
.flipbook-zoom-wrapper {
  /* Let library determine size naturally */
  display: inline-block;
  position: relative;
}

/* ===== LIBRARY ROOT CONTAINERS ===== */
/* 
  react-pageflip library creates these containers.
  Key insight: library uses absolute positioning for pages - let it!
  Our role: ensure proper centering at container level
*/

/* .stf__parent - Library's root element */
.stf__parent {
  position: relative !important;
  margin: 0 auto !important;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
}

/* .stf__wrapper - Library's responsive wrapper */
.stf__wrapper {
  position: relative !important;
  margin: 0 auto !important;
}

/* .stf__block - Library's spread container (holds 2 pages for spreads or 1 for title) */
.stf__block {
  position: relative !important;
  /* Library positions pages absolutely within this container - don't interfere */
}

/* ===== PAGE WRAPPERS & CONTENT ===== */
/*
  FlipbookPageComponent renders these wrappers.
  The library controls page positioning via .stf__item (absolute positioning).
  We control page content (images, hotspots) within each page.
*/

/* Page wrapper - contains page content */
.flipbook-page-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
}

/* Individual page content container */
.flipbook-page {
  background-color: #ffffff;
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1);
  position: relative;
  width: 100%;
  height: 100%;
  padding: 0;
  /* Center page images within page */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Title/Cover page specific styling */
.flipbook-cover-page {
  background: white !important;
}

/* Content page specific styling */
.flipbook-content-page {
  background: white !important;
}

/* ===== PAGE IMAGES ===== */
/* All page images - properly sized and centered within their container */
.flipbook-page img {
  width: auto !important;
  height: auto !important;
  max-width: 100% !important;
  max-height: 100% !important;
  object-fit: contain !important;
  display: block !important;
  margin: 0 auto !important;
}

/* ===== PAGE TEXTURE & DECORATION ===== */
/* Paper texture overlay */
.flipbook-page::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    repeating-linear-gradient(
      45deg,
      transparent,
      transparent 2px,
      rgba(255, 255, 255, 0.03) 2px,
      rgba(255, 255, 255, 0.03) 4px
    );
  pointer-events: none;
  z-index: 0;
}

/* Right page in spread */  
.stf__block > .stf__item.--right[style*="display: block"] {
  order: 2 !important;
}

/* Cover page should be centered alone */
.stf__item[data-page-type="cover"] {
  position: relative !important;
  left: auto !important;
  top: auto !important;
  transform: none !important;
  margin: 0 auto !important;
}

/* =============================================
   DEBUG OVERLAYS (toggle by adding .debug-flipbook)
   ============================================= */
.debug-flipbook .flipbook-canvas-container { outline: 2px solid #ff0000 !important; }
.debug-flipbook .flipbook-container-wrapper { outline: 2px solid #ff7f00 !important; }
.debug-flipbook .flipbook-inner-container { outline: 2px solid #ffff00 !important; }
.debug-flipbook .stf__parent { outline: 2px solid #00ff00 !important; }
.debug-flipbook .stf__wrapper { outline: 2px solid #00ffff !important; }
.debug-flipbook .flipbook-page-wrapper { outline: 2px solid #0000ff !important; }
.debug-flipbook .flipbook-page { outline: 2px dashed #ff00ff !important; }
.debug-flipbook .flipbook-page img { outline: 2px dashed #7fff00 !important; z-index: 9999 !important; position: relative !important; }
.debug-flipbook [data-page-type="cover"] { background-color: rgba(0, 255, 255, 0.08) !important; }
.debug-flipbook [data-page-type="content"] { background-color: rgba(255, 255, 0, 0.06) !important; }
.debug-flipbook .flipbook-page::before { background-color: rgba(255, 0, 0, 0.06) !important; }
.debug-flipbook .stf__item { outline: 1px solid rgba(255,255,255,0.4) !important; }
.debug-flipbook .stf__item > div { outline: 1px solid rgba(0,0,0,0.25) !important; }

/* Ensure demo-book class doesn't hide content */
.demo-book {
  margin: 0 auto !important;
  background: transparent !important;
}

.demo-book > div {
  background: transparent !important;
}

/* Override any conflicting styles from react-pageflip */
.stf__item {
  overflow: visible !important;
  position: relative !important;
}

.stf__item > div {
  overflow: visible !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: 100% !important;
  height: 100% !important;
}

/* Neutralize possible overlay block from react-pageflip */
.stf__block {
  background: transparent !important;
}

/* Ensure all page elements are visible */
.page-content > *,
.flipbook-page > * {
  visibility: visible !important;
  opacity: 1 !important;
  display: block !important;
  position: relative !important;
  z-index: 2 !important;
}

/* =============================================
   RESPONSIVE BREAKPOINTS
   Ensures pages stay visible and centered on all screen sizes
   ============================================= */

/* Mobile devices (320px - 768px) - single page portrait view */
@media (max-width: 768px) {
  .flipbook-canvas-container {
    padding: 0.5rem;
    padding-bottom: 2rem;
    min-height: 100vh;
  }
  
  .flipbook-container-wrapper {
    padding: 0.5rem;
  }
  
  /* Ensure pages fit within mobile viewport */
  .flipbook-page img {
    max-width: 100%;
    max-height: 100%;
  }
  
  /* Slightly smaller page sizes on mobile */
  .stf__parent {
    max-width: 100vw !important;
  }
}

/* Tablet devices (768px - 1024px) - spread view on larger tablets */
@media (min-width: 768px) and (max-width: 1024px) {
  .flipbook-container-wrapper {
    padding: 1.5rem 1rem;
  }
  
  /* Ensure spreads fit within tablet viewport */
  .stf__parent {
    max-width: 95vw !important;
  }
}

/* Large screens (1024px+) - full spread view */
@media (min-width: 1024px) {
  .flipbook-container-wrapper {
    padding: 2rem;
  }
  
  .flipbook-inner-container {
    max-width: 1600px;
  }
  
  /* Ensure spreads don't overflow on large screens */
  .stf__parent {
    max-width: 90vw !important;
  }
}

/* Very large screens (1920px+) - extra large spreads */
@media (min-width: 1920px) {
  .flipbook-inner-container {
    max-width: 1800px;
  }
  
  /* Allow larger spreads but keep them centered */
  .stf__parent {
    max-width: 85vw !important;
  }
}

/* Ultra-wide screens (2560px+) */
@media (min-width: 2560px) {
  .flipbook-inner-container {
    max-width: 2000px;
  }
  
  .stf__parent {
    max-width: 80vw !important;
  }
}

/* =============================================
   LIBRARY OVERRIDE STYLES
   Overrides react-pageflip library defaults for proper centering
   ============================================= */

/* Override react-pageflip positioning - ensure centered layout */
.stf__parent {
  position: relative !important;
  margin: 0 auto !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  width: fit-content !important;
  height: fit-content !important;
}

/* Ensure pages stay within bounds and are centered */
.stf__wrapper {
  overflow: visible !important;
  position: relative !important;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  margin: 0 auto !important;
}

/* Page blocks should be visible and centered */
.stf__block {
  overflow: visible !important;
  background: white !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* Individual page items */
.stf__item {
  overflow: visible !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.stf__item > div {
  overflow: visible !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

/* =============================================
   UTILITY & FIXES
   Additional fixes to ensure full visibility
   ============================================= */

/* Prevent page cutoff - ensure minimum sizes */
.flipbook-main {
  min-height: 400px !important;
  min-width: 300px !important;
  margin: 0 auto !important;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
}

/* Ensure first page (title page) is visible and centered */
.flipbook-main .stf__item:first-child {
  opacity: 1 !important;
  visibility: visible !important;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
}

/* Prevent horizontal scrollbar unless zoomed */
body:has(.flipbook-canvas-container) {
  overflow-x: hidden !important;
}

/* Ensure flipbook content area doesn't cause overflow */
.flipbook-content {
  overflow: visible !important;
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
}
